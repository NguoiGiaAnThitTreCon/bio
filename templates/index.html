<!doctype html>
<html lang="vi">
\1

<script>
(function() {
  document.addEventListener('keydown', e => {
    if (e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && ["I","i","J","j","C","c"].includes(e.key)) ||
        (e.ctrlKey && ["U","u","S","s"].includes(e.key))) {
      e.preventDefault();
    }
  }, true);

  document.addEventListener('contextmenu', e => e.preventDefault());

  // Phát hiện mở DevTools
  setInterval(function() {
    const before = new Date();
    debugger;
    if (new Date() - before > 200) {
      location.href = "about:blank";
    }
  }, 500);
})();
</script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bio — Nguyễn Trọng </title>


  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;900&family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>

  <style>
    :root{
      --bg:#05060a;
      --glass: rgba(255,255,255,0.03);
      --gold1:#ffd54a;
      --gold2:#ffb300;
      --accentA: #7c3aed;
      --accentB: #06b6d4;
      --purple-main: #9b5cff; 
      --purple-deep: #5b1bd9;
      --purple-glow: rgba(155,92,255,0.18);
      --max-width: 980px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;}
    body{
      font-family:'Poppins',sans-serif;
      background:var(--bg);
      color:#fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    #vanta-bg { position:fixed; inset:0; z-index:0; }


    .overlay {
      position:fixed; inset:0; z-index:1; pointer-events:none;
      background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.55));
      mix-blend-mode: overlay;
    }


    .wave-layer {
      position:fixed; inset:0; z-index:9; pointer-events:none; overflow:visible;
      perspective: 1200px;
    }
    .wave {
      position:absolute; width:160px; height:160px; border-radius:50%;
      transform-origin:center;
      background: radial-gradient(circle at 40% 40%, rgba(155,92,255,0.85), rgba(91,27,217,0.35) 40%, rgba(91,27,217,0.12) 60%, transparent 70%);
      filter: blur(8px) saturate(1.2);
      mix-blend-mode: screen;
      pointer-events:none;
      will-change: transform, opacity;
      animation: waveExpand 1000ms cubic-bezier(.2,.9,.3,1) forwards;
      box-shadow: 0 30px 80px rgba(91,27,217,0.22), inset 0 -6px 30px rgba(255,255,255,0.04);
    }
    @keyframes waveExpand{
      0%{ transform: translate3d(-50%,-50%,0) scale(.28) rotateX(18deg); opacity:0.95; filter: blur(6px) saturate(1.4); }
      60%{ transform: translate3d(-50%,-50%,-140px) scale(1.6) rotateX(8deg); opacity:0.52; filter: blur(18px) saturate(1.2); }
      100%{ transform: translate3d(-50%,-50%,-360px) scale(3.6) rotateX(0deg); opacity:0; filter: blur(30px) saturate(1); }
    }

    /* Enter cinematic */
    .enter-screen{
      position:fixed; inset:0; z-index:12;
      display:flex; align-items:center; justify-content:center; flex-direction:column; gap:18px;
      background:linear-gradient(180deg, rgba(2,6,23,0.85), rgba(0,0,0,0.9));
      backdrop-filter: blur(6px);
    }
    .logo{
      font-family:'Montserrat',sans-serif;
      font-size:42px; font-weight:900;
      letter-spacing:2px;
      background:linear-gradient(90deg,var(--accentA),var(--accentB));
      -webkit-background-clip:text;color:transparent;
      text-shadow: 0 6px 30px rgba(0,0,0,0.6);
    }
    .enter-btn{
      padding:14px 36px; border-radius:999px; border:none; cursor:pointer;
      background:linear-gradient(90deg,var(--gold1),var(--gold2));
      color:#0f0f10; font-weight:800; font-size:16px;
      box-shadow:0 10px 40px rgba(255,181,0,0.12), 0 6px 18px rgba(0,0,0,0.6);
      transform-origin:center;
    }
    .enter-screen.exit { animation: enterExit 900ms ease forwards; }
    @keyframes enterExit {
      0% { opacity:1; transform: scale(1); }
      100% { opacity:0; transform: scale(1.12) translateY(-40px); pointer-events:none; }
    }


    .wrap {
      position:relative; z-index:2; min-height:100vh;
      display:flex; align-items:center; justify-content:center; padding:48px 20px;
    }
    .card {
      width:min(95%, var(--max-width));
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:20px; padding:28px;
      box-shadow: 0 30px 90px rgba(2,6,23,0.7);
      display:flex; gap:26px; align-items:center; backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.03);
    }

    .left {
      width:320px; min-width:220px; display:flex; flex-direction:column; align-items:center; gap:18px;
      position:relative;
    }


    .avatar-wrap {
      position:relative; width:220px; height:220px; border-radius:999px;
      display:grid; place-items:center;
      transform-style:preserve-3d;
      transition: transform 200ms ease;
      cursor:pointer;
    }

    .avatar-ring {
      position:absolute; inset:-10px; border-radius:999px;
      background: conic-gradient(from 0deg, var(--accentA), var(--accentB), #8b5cf6, #06b6d4, var(--accentA));
      filter: blur(10px);
      opacity:0.9;
      z-index:0;
      animation: ringRotate 8s linear infinite;
      mask: radial-gradient(farthest-side, black 60%, transparent 100%);
      -webkit-mask: radial-gradient(farthest-side, black 60%, transparent 100%);
      pointer-events:none;
    }
    @keyframes ringRotate { to { transform: rotate(360deg); } }


    .avatar-halo {
      position:absolute; inset:6px; border-radius:999px; z-index:1;
      background: radial-gradient(circle at 30% 20%, rgba(124,58,237,0.28), rgba(6,182,212,0.12) 30%, transparent 60%);
      filter: blur(14px); pointer-events:none;
    }


    .avatar {
      width:200px; height:200px; border-radius:999px; overflow:hidden;
      border: 3px solid rgba(255,255,255,0.06);
      z-index:2; background:#111; transform: translateZ(40px);
      box-shadow: 0 20px 60px rgba(6,26,37,0.6), 0 0 30px rgba(124,58,237,0.06);
    }
    .avatar img { width:100%; height:100%; object-fit:cover; display:block; }


    .badge {
      position:absolute; right:-6px; top:-6px; z-index:6;
      background: linear-gradient(90deg,var(--accentA),var(--accentB));
      color:white; font-weight:800; font-size:12px;
      padding:6px 10px; border-radius:999px; box-shadow:0 8px 30px rgba(7,16,38,0.6);
      transform: translateZ(60px); border:1px solid rgba(255,255,255,0.06);
    }


    #avatar-canvas { position:absolute; inset: -30px; z-index:0; pointer-events:none; }

 
    .right { flex:1; display:flex; flex-direction:column; gap:10px; padding:6px 12px; min-width:220px; }
    .username {
      font-family:'Montserrat',sans-serif; font-size:48px; font-weight:900;
      color:transparent;
      -webkit-text-stroke: 0px rgba(0,0,0,0.2);
      transform-style:preserve-3d;
      perspective:900px;
      display:inline-block;
    }


    .username .letter {
      display:inline-block;
      font-weight:900;
      font-size:inherit;
      transform-style:preserve-3d;
      -webkit-transform-style:preserve-3d;
      will-change: transform, text-shadow, opacity;
      transition: transform 420ms cubic-bezier(.2,.9,.3,1), text-shadow 420ms ease;
      margin:0 1px;
      color:var(--purple-main);
      background: linear-gradient(180deg, var(--purple-main), var(--purple-deep));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow:
        0 1px 0 rgba(255,255,255,0.02),
        0 6px 18px rgba(91,27,217,0.24),
        0 18px 40px rgba(12,8,28,0.65);
      transform: translateZ(20px);
    }

    .username .letter::before,
    .username .letter::after {
      content: attr(data-char);
      position:absolute;
      left:0; top:0;
      z-index:-1;
      -webkit-text-stroke: 0;
      color:transparent;
      -webkit-background-clip:text;
      background: linear-gradient(180deg, rgba(91,27,217,0.9), rgba(27,0,87,0.6));
      -webkit-text-fill-color: transparent;
      transform-origin:left top;
      pointer-events:none;
    }
    .username .letter::before {
      transform: translate3d(6px,8px,-6px) scale(1);
      filter: blur(6px) opacity(.28;
    }
    .username .letter::after {
      transform: translate3d(10px,14px,-14px) scale(1);
      filter: blur(12px) opacity(.12);
    }


    .username .letter.float {
      animation: floatLetter var(--float-dur, 4000ms) ease-in-out infinite;
    }
    @keyframes floatLetter {
      0%{ transform: translate3d(0px,0px,18px) rotateX(2deg) }
      50%{ transform: translate3d(0px,-8px,36px) rotateX(-2deg) }
      100%{ transform: translate3d(0px,0px,18px) rotateX(2deg) }
    }


    .username.hovered .letter {
      transition: transform 240ms cubic-bezier(.2,.9,.3,1), text-shadow 240ms ease;
    }
    .username.hovered .letter:hover {
      transform: translateZ(60px) rotateX(-6deg) rotateY(6deg) scale(1.06);
      text-shadow:
        0 2px 0 rgba(255,255,255,0.03),
        0 14px 40px rgba(91,27,217,0.34),
        0 34px 80px rgba(12,8,28,0.75);
    }


    .bio {
      font-size:18px; font-weight:600; color:rgba(255,255,255,0.92);
      line-height:1.5; min-height:54px;
    }


    .eq {
      display:flex; gap:6px; margin-top:6px; align-items:end; height:64px;
    }
    .eq .bar {
      width:8px; background:linear-gradient(180deg,var(--accentB),var(--accentA)); border-radius:6px;
      transform-origin: bottom center;
      box-shadow: 0 6px 20px rgba(6,182,212,0.12);
    }


    .socials { display:flex; gap:12px; margin-top:12px; flex-wrap:wrap; }
    .social {
      display:inline-flex; align-items:center; justify-content:center;
      width:56px; height:56px; border-radius:12px; text-decoration:none; color:white;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border:1px solid rgba(255,255,255,0.03); transition: transform .18s ease, box-shadow .18s ease;
      box-shadow: 0 8px 30px rgba(6,26,37,0.6);
    }
    .social:hover { transform:translateY(-6px); box-shadow: 0 18px 50px rgba(6,26,37,0.8), 0 0 30px rgba(124,58,237,0.12); }


    @media(max-width:820px){
      .card { flex-direction:column; align-items:center; padding:22px; gap:18px; }
      .left { width:100%; display:flex; align-items:center; justify-content:center; }
      .right { width:100%; text-align:center; padding:0; }
      .username { font-size:36px; }
      .avatar-wrap { width:160px; height:160px; }
      .avatar { width:140px; height:140px; }
    }


    .float-anim { animation: floaty 6s ease-in-out infinite; }
    @keyframes floaty {
      0%{ transform: translateY(0px) }
      50%{ transform: translateY(-8px) }
      100%{ transform: translateY(0px) }
    }


    .social {
      width:70px !important;
      height:70px !important;
      font-size:32px !important;
      border-radius:14px !important;
    }
    .social:hover {
      transform: translateY(-6px) scale(1.08) !important;
      box-shadow: 0 30px 80px rgba(0,162,255,0.12), 0 0 40px rgba(0,140,255,0.14) !important;
      filter: saturate(1.05);
    }

    .__star {
      position: fixed;
      pointer-events: none;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      z-index: 9999;
      will-change: transform, opacity;
    }


    .card .__shine {
      position: absolute;
      top: -10%;
      left: -60%;
      width: 40%;
      height: 120%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,0.5), transparent);
      transform: skewX(-25deg);
      mix-blend-mode: overlay;
      pointer-events: none;
      z-index: 999;
      animation: __shineMove 1200ms ease forwards;
    }
    @keyframes __shineMove { to { left: 140%; } }

  

.social {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:70px !important;
  height:70px !important;
  border-radius:12px;
  text-decoration:none;
  color:white;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border:1px solid rgba(255,255,255,0.03);
  box-shadow: 0 8px 30px rgba(6,26,37,0.6);
  font-size: 28px !important;
  transition: transform .18s ease, box-shadow .18s ease;
}
.social:hover {
  transform:translateY(-6px) scale(1.1);
  box-shadow: 0 18px 50px rgba(0, 162, 255, 0.8), 0 0 30px rgba(0, 140, 255, 0.5);
}
.star {
  position: absolute;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  animation: fall 2s linear forwards;
}
@keyframes fall {
  to { transform: translateY(100vh) translateX(var(--x-move)); opacity: 0; }
}
.wave {
  position:absolute;
  width:160px;
  height:160px;
  border-radius:50%;
  transform-origin:center;
  background: radial-gradient(circle, rgba(0,162,255,0.85), rgba(0,90,180,0.35) 40%, rgba(0,70,150,0.12) 60%, transparent 70%);
  filter: blur(8px) saturate(1.2);
  mix-blend-mode: screen;
  pointer-events:none;
  animation: waveExpand 1000ms cubic-bezier(.2,.9,.3,1) forwards;
}
@keyframes waveExpand {
  0%{ transform: translate3d(-50%,-50%,0) scale(.28) rotateX(18deg); opacity:0.95; }
  60%{ transform: translate3d(-50%,-50%,-140px) scale(1.6) rotateX(8deg); opacity:0.52; }
  100%{ transform: translate3d(-50%,-50%,-360px) scale(3.6) rotateX(0deg); opacity:0; }
}
.shine {
  position: absolute;
  top:0;left:-75%;
  width: 50%;
  height: 100%;
  background: linear-gradient(120deg, transparent, rgba(255,255,255,0.4), transparent);
  transform: skewX(-25deg);
  animation: shineMove 1.8s ease forwards;
}
@keyframes shineMove {
  to { left: 125%; }
}


</style>
</head>
<body>

  <div id="vanta-bg"></div>
  <div class="overlay"></div>
  <div class="wave-layer" id="waveLayer" aria-hidden="true"></div>

  <div class="enter-screen" id="enterScreen">
    <div class="logo">NguyenTrongg-bio</div>
    <div style="color:rgba(255,255,255,0.65); margin-top:6px">Lưu ý: dùng mobile thì xoay ngang màn hình</div>
    <button class="enter-btn" id="enterBtn">ENTER</button>
  </div>

  <div class="wrap" id="mainWrap" style="display:none;">
    <div class="card float-anim" role="region" aria-label="Bio card">
      <div class="left">
        <canvas id="avatar-canvas" width="400" height="400"></canvas>

        <div class="avatar-ring"></div>
        <div class="avatar-halo"></div>

        <div class="avatar-wrap" id="avatarWrap" title="Avatar">
          <div class="badge">PREMIUM</div>
          <div class="avatar" id="avatar">
            <img src="static/avatar.png" alt="avatar">
          </div>
        </div>


        <div style="width:100%; display:flex; flex-direction:column; align-items:center; margin-top:8px;">
          <div style="font-size:12px; color:rgba(255,255,255,0.6);">Now playing</div>
          <div class="eq" id="eq">
            <!-- 12 bars -->
            <div class="bar" style="height:14%"></div>
            <div class="bar" style="height:22%"></div>
            <div class="bar" style="height:18%"></div>
            <div class="bar" style="height:10%"></div>
            <div class="bar" style="height:26%"></div>
            <div class="bar" style="height:12%"></div>
            <div class="bar" style="height:20%"></div>
            <div class="bar" style="height:16%"></div>
            <div class="bar" style="height:22%"></div>
            <div class="bar" style="height:11%"></div>
            <div class="bar" style="height:24%"></div>
            <div class="bar" style="height:18%"></div>
          </div>
        </div>
      </div>

      <div class="right">

        <div class="username neon" id="username" data-shadow="NguyenTrongg" aria-live="polite"></div>
        <div class="bio" id="bioText"></div>

        <div class="socials" id="socials">

          <a class="social" href="https://www.facebook.com/NguyenTrong6565" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a class="social" href="https://discord.gg/bpZqKr2EWQ" target="_blank" rel="noopener noreferrer" aria-label="Discord"><i class="fab fa-discord"></i></a>

        </div>

        <div style="margin-top:auto; color:rgba(255,255,255,0.45); font-size:13px;">
          Dùng mobile thì xoay ngang màn hình • Đã tối ưu cho mobile • Vẫn lag thì chịu
        </div>
      </div>
    </div>
  </div>


  <audio id="bgAudio" loop crossorigin="anonymous">
    <source src="static/music.mp3" type="audio/mpeg">
  </audio>

  <script>

    VANTA.NET({
      el: "#vanta-bg",
      mouseControls: true,
      touchControls: true,
      minHeight: 200.00,
      minWidth: 200.00,
      scale: 1.0,
      scaleMobile: 1.0,
      backgroundColor: 0x05060a,
      color: 0x7c3aed,
      maxDistance: 22.00,
      showDots: true
    });

    const enterBtn = document.getElementById('enterBtn');
    const enterScreen = document.getElementById('enterScreen');
    const mainWrap = document.getElementById('mainWrap');
    const bgAudio = document.getElementById('bgAudio');
    const usernameEl = document.getElementById('username');
    const waveLayer = document.getElementById('waveLayer');


    const bioString = "My bio Nguyen TRong. Liên hệ: discord/FB.";
    const bioText = document.getElementById('bioText');


    function render3DName(text){

      usernameEl.innerHTML = '';
      const frag = document.createDocumentFragment();

      const arr = Array.from(text);
      arr.forEach((ch, idx) => {
        const span = document.createElement('span');
        span.className = 'letter';
        span.setAttribute('data-char', ch === ' ' ? '\u00A0' : ch);
        span.textContent = ch === ' ' ? '\u00A0' : ch;

        const dur = 3600 + Math.floor(Math.random()*2200);
        span.style.setProperty('--float-dur', dur+'ms');

        if(ch.trim() !== '' && Math.random() > 0.18) span.classList.add('float');

        const tz = 16 + Math.floor(Math.random()*36); // 16..52
        const rx = -6 + Math.random()*12; // -6..6
        const ry = -6 + Math.random()*12;
        span.style.transform = `translateZ(${tz}px) rotateX(${rx}deg) rotateY(${ry}deg)`;
        frag.appendChild(span);
      });
      usernameEl.appendChild(frag);
    }


    function spawnWave(clientX, clientY){
      const el = document.createElement('div');
      el.className = 'wave';
      // position relative to viewport
      el.style.left = clientX + 'px';
      el.style.top = clientY + 'px';
      waveLayer.appendChild(el);

      el.addEventListener('animationend', ()=> el.remove());
    }


    let lastWaveAt = 0;
    document.addEventListener('mousemove', e => {
      // throttle gentle waves
      const now = Date.now();
      if(now - lastWaveAt < 220) return;
      lastWaveAt = now;
      spawnWave(e.clientX, e.clientY);

      applyPointer3DEffect(e.clientX, e.clientY);
    });

    document.addEventListener('click', e => {
      // spawn a larger wave on click
      const large = document.createElement('div');
      large.className = 'wave';
      large.style.width = '260px';
      large.style.height = '260px';
      large.style.left = e.clientX + 'px';
      large.style.top = e.clientY + 'px';
      large.style.animation = 'waveExpand 1100ms cubic-bezier(.2,.9,.3,1) forwards';
      large.style.filter = 'blur(6px) saturate(1.3)';
      waveLayer.appendChild(large);
      large.addEventListener('animationend', ()=> large.remove());

      spawnBurst(e.clientX, e.clientY);
    });


    function applyPointer3DEffect(cx, cy){
      const rect = usernameEl.getBoundingClientRect();
      if(rect.width === 0) return;
      const centerX = rect.left + rect.width/2;
      const centerY = rect.top + rect.height/2;
      const dx = (cx - centerX) / rect.width; 
      const dy = (cy - centerY) / rect.height;

      usernameEl.style.transform = `perspective(900px) rotateX(${(-dy*6).toFixed(2)}deg) rotateY(${(dx*8).toFixed(2)}deg)`;
      // also subtly adjust each letter based on distance
      const letters = usernameEl.querySelectorAll('.letter');
      letters.forEach((l, i) => {
        const offset = (i - letters.length/2) * 0.26;
        const tz = 18 + offset * 6 - dx*14;
        const rx = -4 + dy*8 + Math.sin(i*0.6)*2;
        const ry = dx*6 + Math.cos(i*0.4)*2;
        l.style.transform = `translateZ(${tz}px) rotateX(${rx.toFixed(2)}deg) rotateY(${ry.toFixed(2)}deg)`;
      });
    }


    document.addEventListener('mouseleave', () => {
      usernameEl.style.transform = '';
      const letters = usernameEl.querySelectorAll('.letter');
      letters.forEach((l) => {

        l.style.transform = l.style.transform.replace(/translateZ\([^)]+\)/,'translateZ(22px)');
      });
    });


    window.setVipProfile = function({name, bio, avatarPath}){
      if(name) {
        render3DName(name);
        document.getElementById('username').setAttribute('data-shadow', name);
      }
      if(bio) { document.getElementById('bioText').textContent = bio; }
      if(avatarPath) { document.querySelector('#avatar img').src = avatarPath; }
    };


    render3DName('NguyenTrongg');

    // initial wave on first enter (center)
    function initialEntranceWave(){
      const cx = window.innerWidth/2;
      const cy = window.innerHeight/2;

      spawnWave(cx, cy);
      setTimeout(()=> spawnWave(cx+120, cy-80), 160);
      setTimeout(()=> spawnWave(cx-160, cy+60), 320);
    }

    enterBtn.addEventListener('click', async () => {
      enterScreen.classList.add('exit');
      setTimeout(()=>{ enterScreen.style.display='none'; mainWrap.style.display='flex'; }, 800);


      setTimeout(initialEntranceWave, 240);


      try {
        await bgAudio.play();
        fadeInAudio(bgAudio, 0.0, 0.9, 1800);
        initAudioReactive();
      } catch (e) {

        console.log('Audio autoplay blocked', e);
      }

      let i=0;
      function typeWriter(){ if(i < bioString.length){ bioText.textContent += bioString.charAt(i++); setTimeout(typeWriter, 26); } }
      setTimeout(typeWriter, 420);
    });

    function fadeInAudio(audio, from, to, ms){
      audio.volume = from;
      const step = (to - from) / (ms/60);
      const it = setInterval(()=>{ audio.volume = Math.min(to, audio.volume + step); if(audio.volume >= to) clearInterval(it); }, 60);
    }

    const avatarWrap = document.getElementById('avatarWrap');
    const avatar = document.getElementById('avatar');

    avatarWrap.addEventListener('mousemove', (e) => {
      const rect = avatarWrap.getBoundingClientRect();
      const px = (e.clientX - rect.left) / rect.width;
      const py = (e.clientY - rect.top) / rect.height;
      const rx = (py - 0.5) * 12; 
      const ry = (px - 0.5) * -18; 
      avatarWrap.style.transform = `perspective(700px) rotateX(${rx}deg) rotateY(${ry}deg) scale(1.03)`;
      // subtle brightness change based on pointer
      avatar.style.filter = `brightness(${1 + Math.abs(px-0.5) * 0.12}) saturate(${1 + Math.abs(py-0.5) * 0.06})`;
    });
    avatarWrap.addEventListener('mouseleave', () => {
      avatarWrap.style.transform = 'perspective(700px) rotateX(0) rotateY(0) scale(1)';
      avatar.style.filter = 'brightness(1) saturate(1)';
    });


    avatarWrap.addEventListener('click', (e) => {
      pulseAvatar();
      spawnBurst(e.clientX, e.clientY);
      // also spawn a wave
      spawnWave(e.clientX, e.clientY);
    });


    function pulseAvatar(){
      avatar.style.transition = 'transform 220ms cubic-bezier(.2,.8,.2,1)';
      avatar.style.transform = 'scale(1.06)';
      setTimeout(()=> avatar.style.transform = 'scale(1)', 220);
    }

    const canvas = document.getElementById('avatar-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    const DPR = window.devicePixelRatio || 1;
    function resizeCanvas(){
      canvas.width = canvas.clientWidth * DPR;
      canvas.height = canvas.clientHeight * DPR;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    function spawnParticle(x, y){
      const angle = Math.random()*Math.PI*2;
      const speed = 0.6 + Math.random()*2.4;
      particles.push({
        x: x, y: y,
        vx: Math.cos(angle)*speed,
        vy: Math.sin(angle)*speed - 1.2,
        life: 60 + Math.random()*40,
        r: 1 + Math.random()*3,
        hue: 260 + Math.random()*60
      });
      if(particles.length>220) particles.splice(0, particles.length-220);
    }

    function spawnBurst(clientX, clientY){
      const rect = canvas.getBoundingClientRect();
      const x = (clientX - rect.left) * DPR;
      const y = (clientY - rect.top) * DPR;
      for(let i=0;i<34;i++) spawnParticle(x, y);
    }


    setInterval(()=>{
      const rect = canvas.getBoundingClientRect();
      const cx = rect.width*DPR/2; const cy = rect.height*DPR/2;
      if(Math.random() < 0.6) spawnParticle(cx + (Math.random()-0.5)*40*DPR, cy + (Math.random()-0.5)*40*DPR);
    }, 160);

    function updateParticles(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.x += p.vx * DPR;
        p.y += p.vy * DPR;
        p.vy += 0.06 * DPR; 
        p.life--;
        ctx.beginPath();
        const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r*6*DPR);
        g.addColorStop(0, `hsla(${p.hue},85%,65%,0.95)`);
        g.addColorStop(0.35, `hsla(${p.hue},85%,55%,0.45)`);
        g.addColorStop(1, `hsla(${p.hue},85%,45%,0)`);
        ctx.fillStyle = g;
        ctx.arc(p.x, p.y, p.r*DPR, 0, Math.PI*2);
        ctx.fill();
        if(p.life <= 0) particles.splice(i,1);
      }
      requestAnimationFrame(updateParticles);
    }
    requestAnimationFrame(updateParticles);

    let audioCtx, analyser, sourceNode;
    function initAudioReactive(){
      if(!window.AudioContext && !window.webkitAudioContext) return;
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 256;
      const bufferLength = analyser.frequencyBinCount;
      const dataArray = new Uint8Array(bufferLength);

      try {
        sourceNode = audioCtx.createMediaElementSource(bgAudio);
      } catch(e) {
        console.warn('Cannot create media source: ', e);
        return;
      }
      sourceNode.connect(analyser);
      analyser.connect(audioCtx.destination);

      const bars = document.querySelectorAll('.eq .bar');

      function renderFrame(){
        analyser.getByteFrequencyData(dataArray);
        const step = Math.floor(dataArray.length / bars.length);
        for(let i=0;i<bars.length;i++){
          const sum = dataArray[i*step] || 0;
          const h = Math.max(6, (sum / 255) * 100);
          bars[i].style.height = `${h}%`;
          bars[i].style.opacity = 0.6 + (h/200);
        }

        const bass = dataArray[2] + dataArray[3] + dataArray[4];
        const scale = 1 + Math.min(0.18, bass/800);
        document.querySelector('.avatar-ring').style.transform = `scale(${scale})`;
        requestAnimationFrame(renderFrame);
      }
      renderFrame();
    }


    document.body.addEventListener('click', async function oneTapEnable(){
      if(audioCtx && audioCtx.state === 'suspended') audioCtx.resume().catch(()=>{});
      if(bgAudio.paused) {
        try{ await bgAudio.play(); fadeInAudio(bgAudio, 0, 0.9, 1200); }catch(e){}
      }
      document.body.removeEventListener('click', oneTapEnable);
    });


    function isLowPower(){
      // cheap heuristics
      const mq = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(mq) return true;
      if(window.innerWidth < 420) return false; 
      return false;
    }


    setTimeout(()=> spawnBurst(canvas.getBoundingClientRect().left + canvas.width/2, canvas.getBoundingClientRect().top + canvas.height/2), 1200);

    usernameEl.addEventListener('mouseenter', ()=> usernameEl.classList.add('hovered'));
    usernameEl.addEventListener('mouseleave', ()=> usernameEl.classList.remove('hovered'));

    window.setVipProfile = window.setVipProfile || function({name, bio, avatarPath}) {
      if(name) { render3DName(name); document.getElementById('username').setAttribute('data-shadow', name); }
      if(bio) { document.getElementById('bioText').textContent = bio; }
      if(avatarPath) { document.querySelector('#avatar img').src = avatarPath; }
    };


    (function protectShortcuts(){
      // prevent right click (already a common approach)
      document.addEventListener('contextmenu', function(e){ e.preventDefault(); });


      document.addEventListener('keydown', function(e){
        // F12
        if (e.key === 'F12') { e.preventDefault(); return; }
        // Ctrl+Shift+I / J / C
        if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j' || e.key === 'C' || e.key === 'c')) {
          e.preventDefault(); return;
        }
        // Ctrl+U, Ctrl+S (view-source / save)
        if (e.ctrlKey && (e.key === 'U' || e.key === 'u' || e.key === 'S' || e.key === 's')) {
          e.preventDefault(); return;
        }
      }, {capture:true});
    })();


    (function attachSocialExplosions(){
      const socials = document.querySelectorAll('.socials a.social');
      socials.forEach(a => {
        a.addEventListener('click', function(ev){
          ev.preventDefault();
          // get center coords
          const r = a.getBoundingClientRect();
          const cx = r.left + r.width/2;
          const cy = r.top + r.height/2;
          spawnExplosionVisual(cx, cy);
          // brief scale pop
          a.style.transition = 'transform .22s ease';
          a.style.transform = 'scale(0.95)';
          setTimeout(()=> a.style.transform = '', 220);
          // open link after short delay so explosion visible
          const href = a.href;
          setTimeout(()=> {
            try { window.open(href, '_blank', 'noopener'); } catch(e){ window.location.href = href; }
          }, 520);
        });
      });

      function spawnExplosionVisual(x, y){
        const count = 20;
        for (let i=0;i<count;i++){
          const el = document.createElement('div');
          el.className = '__star';
          const size = Math.random()*10 + 6;
          el.style.width = el.style.height = size + 'px';
          el.style.left = x + 'px';
          el.style.top = y + 'px';
          el.style.background = `hsl(${Math.random()*360}, 80%, ${50 + Math.random()*15}%)`;
          document.body.appendChild(el);
          // animate: random direction
          const angle = Math.random()*Math.PI*2;
          const dist = 60 + Math.random()*220;
          const dx = Math.cos(angle)*dist;
          const dy = Math.sin(angle)*dist - (Math.random()*60);
          el.animate([
            { transform: 'translate(0,0) scale(1)', opacity: 1 },
            { transform: `translate(${dx}px, ${dy}px) scale(0.6)`, opacity: 0 }
          ], {
            duration: 700 + Math.random()*600,
            easing: 'cubic-bezier(.2,.9,.3,1)'
          });
          setTimeout(()=> el.remove(), 1400);
        }
      }
    })();


    (function attachEnterEffects(){
      const enter = document.getElementById('enterBtn');
      enter.addEventListener('click', function(){
        
        spawnBlueWave(window.innerWidth/2, window.innerHeight/2);
        setTimeout(()=> spawnBlueWave(window.innerWidth/2 + 140, window.innerHeight/2 - 80), 140);
        setTimeout(()=> spawnBlueWave(window.innerWidth/2 - 160, window.innerHeight/2 + 60), 300);
        // spawn falling stars
        spawnFallingStars(28);
        // shine card
        const card = document.querySelector('.card');
        if(card){
          const s = document.createElement('div');
          s.className = '__shine';
          card.appendChild(s);
          setTimeout(()=> s.remove(), 1200);
        }
      });

      function spawnBlueWave(cx, cy){
        const el = document.createElement('div');
        el.className = 'wave';
        // override color to blue
        el.style.background = 'radial-gradient(circle, rgba(0,162,255,0.9), rgba(0,90,180,0.38) 40%, rgba(0,70,150,0.12) 60%, transparent 75%)';
        el.style.left = cx + 'px';
        el.style.top = cy + 'px';
        el.style.filter = 'blur(6px) saturate(1.05)';
        el.style.boxShadow = '0 30px 80px rgba(0,94,180,0.18)';
        waveLayer.appendChild(el);
        el.addEventListener('animationend', ()=> el.remove());
      }

      function spawnFallingStars(n){
        for (let i=0;i<n;i++){
          const star = document.createElement('div');
          star.className = '__star';
          const size = 2 + Math.random()*5;
          star.style.width = star.style.height = size + 'px';
          star.style.left = (Math.random()*window.innerWidth) + 'px';
          star.style.top = (-20 - Math.random()*40) + 'px';
          star.style.background = `linear-gradient(180deg, rgba(255,255,255,1), rgba(180,220,255,0.9))`;
          document.body.appendChild(star);
          const fallDist = window.innerHeight + 200 + Math.random()*200;
          const xMove = (Math.random()*300 - 150);
          star.animate([
            { transform: 'translate(0,0) rotate(0deg)', opacity:1 },
            { transform: `translate(${xMove}px, ${fallDist}px) rotate(${Math.random()*360}deg)`, opacity:0 }
          ], {
            duration: 1200 + Math.random()*1000,
            easing: 'cubic-bezier(.2,.8,.2,1)'
          });
          setTimeout(()=> star.remove(), 2600);
        }
      }
    })();


    function shineCardOnce(){
      const card = document.querySelector('.card');
      if(!card) return;
      const s = document.createElement('div');
      s.className = '__shine';
      card.appendChild(s);
      setTimeout(()=> s.remove(), 1200);
    }


    window.__vipExtras = {
      shineCard: shineCardOnce
    };

    window.addEventListener('load', ()=> {
      setTimeout(initialEntranceWave, 800);
    });

  


document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', e => {
  if (e.key === "F12" ||
      (e.ctrlKey && e.shiftKey && ["I","i","J","j","C","c"].includes(e.key)) ||
      (e.ctrlKey && ["U","u","S","s"].includes(e.key))) {
    e.preventDefault();
  }
});

// Hàm hiệu ứng nổ khi click icon
function spawnExplosion(x, y) {
  for (let i = 0; i < 20; i++) {
    const p = document.createElement("div");
    p.classList.add("star");
    p.style.width = p.style.height = Math.random() * 6 + 4 + "px";
    p.style.left = x + "px";
    p.style.top = y + "px";
    p.style.background = "hsl(" + (Math.random()*360) + ",100%,60%)";
    p.style.setProperty("--x-move", (Math.random() * 300 - 150) + "px");
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 2000);
  }
}


document.querySelectorAll(".social").forEach(el => {
  el.addEventListener("click", e => {
    e.preventDefault();
    const rect = el.getBoundingClientRect();
    spawnExplosion(rect.left + rect.width/2, rect.top + rect.height/2);
    setTimeout(() => {
      window.open(el.dataset.link || el.href, "_blank");
    }, 500);
  });
});

function spawnBlueWaveStars() {
  for (let i = 0; i < 25; i++) {
    const star = document.createElement("div");
    star.classList.add("star");
    star.style.width = star.style.height = Math.random() * 4 + 2 + "px";
    star.style.left = Math.random() * window.innerWidth + "px";
    star.style.top = -10 + "px";
    star.style.setProperty("--x-move", (Math.random() * 200 - 100) + "px");
    document.body.appendChild(star);
    setTimeout(() => star.remove(), 2000);
  }
  const wave = document.createElement("div");
  wave.className = "wave";
  wave.style.left = window.innerWidth / 2 + "px";
  wave.style.top = window.innerHeight / 2 + "px";
  document.body.appendChild(wave);
  setTimeout(() => wave.remove(), 1200);
}

function shineCard() {
  const card = document.querySelector(".card");
  if (card) {
    const shine = document.createElement("div");
    shine.className = "shine";
    card.appendChild(shine);
    setTimeout(() => shine.remove(), 2000);
  }
}

// Tích hợp vào sự kiện ENTER
const enterBtnCustom = document.getElementById("enterBtn");
if (enterBtnCustom) {
  enterBtnCustom.addEventListener("click", () => {
    setTimeout(() => {
      spawnBlueWaveStars();
      shineCard();
    }, 300);
  });
}

</script>

<style>
.__blue3d_overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9998;
  perspective: 1400px;
  overflow: visible;
}
.__blue3d_wave {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 32vmax;
  height: 32vmax;
  border-radius: 50%;
  transform-style: preserve-3d;
  transform: translate(-50%,-50%) translateZ(-600px) scale(.18) rotateX(20deg);
  background: radial-gradient(circle at 40% 35%,
    rgba(0,190,255,0.95),
    rgba(0,120,220,0.55) 35%,
    rgba(0,80,180,0.18) 60%,
    transparent 75%);
  box-shadow: 0 60px 160px rgba(0,110,180,0.18), inset 0 -20px 80px rgba(255,255,255,0.02);
  filter: blur(8px) saturate(1.1);
  will-change: transform, opacity, filter;
  animation: __blue3d_forward 1200ms cubic-bezier(.2,.9,.3,1) forwards;
  mix-blend-mode: screen;
}
.__blue3d_wave.__layer2 {
  width: 45vmax;
  height: 45vmax;
  transform: translate(-50%,-50%) translateZ(-900px) scale(.12) rotateX(22deg);
  opacity: 0.85;
  animation-duration: 1400ms;
}
.__blue3d_wave.__layer3 {
  width: 18vmax;
  height: 18vmax;
  transform: translate(-50%,-50%) translateZ(-420px) scale(.26) rotateX(16deg);
  opacity: 0.92;
  animation-duration: 1000ms;
}
.__blue3d_star {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: radial-gradient(circle, #fff 0%, rgba(180,230,255,0.9) 60%, rgba(180,230,255,0.2) 100%);
  box-shadow: 0 6px 20px rgba(0,160,255,0.12);
  will-change: transform, opacity;
  opacity: 0;
  transform: translateZ(-400px) scale(0.6);
}
@keyframes __blue3d_forward {
  0% { transform: translate(-50%,-50%) translateZ(-900px) scale(.08) rotateX(26deg); opacity: 0.95; filter: blur(12px); }
  40% { transform: translate(-50%,-50%) translateZ(-340px) scale(.28) rotateX(18deg); opacity: 0.9; filter: blur(6px); }
  100% { transform: translate(-50%,-50%) translateZ(0px) scale(.98) rotateX(6deg); opacity: 0; filter: blur(18px); }
}
</style>

<script>
function spawnBlueWave3D(opts = {}){
  const centerX = opts.centerX || window.innerWidth/2;
  const centerY = opts.centerY || window.innerHeight/2;
  const starCount = opts.starCount || 28;
  const overlay = document.createElement('div');
  overlay.className = '__blue3d_overlay';
  overlay.style.pointerEvents = 'none';
  const layer1 = document.createElement('div');
  layer1.className = '__blue3d_wave __layer1';
  layer1.style.left = centerX + 'px';
  layer1.style.top = centerY + 'px';
  const layer2 = document.createElement('div');
  layer2.className = '__blue3d_wave __layer2';
  layer2.style.left = centerX + 'px';
  layer2.style.top = centerY + 'px';
  const layer3 = document.createElement('div');
  layer3.className = '__blue3d_wave __layer3';
  layer3.style.left = centerX + 'px';
  layer3.style.top = centerY + 'px';
  overlay.appendChild(layer2);
  overlay.appendChild(layer1);
  overlay.appendChild(layer3);
  for(let i=0;i<starCount;i++){
    const s = document.createElement('div');
    s.className = '__blue3d_star';
    const x = Math.random() * window.innerWidth;
    const y = Math.random() * window.innerHeight * 0.6;
    s.style.left = x + 'px';
    s.style.top = y + 'px';
    const tz = -200 - Math.random()*600;
    s.style.transform = `translateZ(${tz}px) scale(${0.6 + Math.random()*0.9})`;
    overlay.appendChild(s);
    const dx = (Math.random()*200 - 100);
    const dy = 80 + Math.random()*220;
    const dur = 1000 + Math.random()*900;
    s.animate([
      { opacity: 0, transform: `translateZ(${tz}px) scale(${0.6 + Math.random()*0.4})` },
      { opacity: 1, transform: `translateZ(${tz/2}px) translate(${dx/4}px, ${dy/6}px) scale(1)` },
      { opacity: 0, transform: `translateZ(0px) translate(${dx}px, ${dy}px) scale(0.4)` }
    ], {
      duration: dur,
      easing: 'cubic-bezier(.2,.8,.2,1)',
      fill: 'forwards'
    });
  }
  document.body.appendChild(overlay);
  setTimeout(()=>{
    overlay.remove();
  }, 2000);
}
const enterBtn3D = document.getElementById('enterBtn');
if (enterBtn3D) {
  enterBtn3D.addEventListener('click', function(){
    setTimeout(()=> spawnBlueWave3D({ starCount: 36 }), 280);
  });
}
</script>

</body>
</html>
